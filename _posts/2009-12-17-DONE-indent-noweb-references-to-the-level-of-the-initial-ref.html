---
title: DONE indent noweb references to the level of the initial ref
layout: default
---

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="done DONE"> DONE</span> indent noweb references to the level of the initial ref </h2>
<div class="outline-text-2" id="text-1">

<ul>
<li>
State "DONE"       from "DONE" <span class="timestamp-wrapper"> <span class="timestamp">2009-12-17 Thu 11:22</span></span>
</li>
</ul>

<p>augment `org-babel-expand-noweb-references' so that it rigidly indents
the body of the block to the depth of the original noweb reference.
</p>



<pre class="example">In fact, a better specification is: copy whatever (any character) is in front
of `&lt;&lt;&lt;code here&gt;&gt;&gt;' in front of every line of the referenced block (same
amount of characters, be it spaces or something else).

That way, a commented SQL source block like the following would be correctly
outputted:

    -- -- set flag
    -- UPDATE dossier
    -- SET DossierSentToSector = @now
    -- WHERE ID
    --     IN (SELECT actID_fk
    --         FROM actions
    --         WHERE (actID = 338 AND actEtat = 3))
    --     AND F1SignDate &lt; @firstDayOfThisMonth
    --     AND DossierSentToSector IS NULL
    --     AND
    --     &lt;&lt;ConditionForSector&gt;&gt;

Currently, the first line of the "condition" block is commented, the others
not, resulting in incorrect code being tangled.

With the above "spec", I guess all cases are covered. What do you think?
</pre>


</div>
</div>
