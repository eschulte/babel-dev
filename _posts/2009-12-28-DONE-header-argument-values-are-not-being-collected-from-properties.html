---
title: DONE header argument values are not being collected from properties
layout: default
---

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="done DONE"> DONE</span> header argument values are not being collected from properties </h2>
<div class="outline-text-2" id="text-1">

<ul>
<li>
State "DONE"       from "TODO" <span class="timestamp-wrapper"> <span class="timestamp">2009-12-28 Mon 18:11</span></span>
</li>
<li>
State "TODO"       from "" <span class="timestamp-wrapper"> <span class="timestamp">2009-12-28 Mon 16:07</span></span>

</li>
</ul>

<p>Many types of header arguments are not having their values properly
read from outline-level properties.
</p>
<p>
There were two problems here
</p><ol>
<li>
we weren't searching for all needed header arguments in properties
</li>
<li>
we weren't inheriting header arguments from enclosing properties

</li>
</ol>

<p>both of these issues were resolved in changes to
<code>org-babel-params-from-properties</code> (see <a href="#org-babel-params-from-properties-code">below</a>).
</p>
<ol>
<li>
we are now tracking the following properties



<pre class="src src-emacs-lisp">'<span class="org-esk-paren">(</span><span class="org-string">"cache"</span> <span class="org-string">"cmdline"</span> <span class="org-string">"exports"</span> <span class="org-string">"file"</span> <span class="org-string">"noweb"</span> <span class="org-string">"results"</span>
               <span class="org-string">"session"</span> <span class="org-string">"tangle"</span> <span class="org-string">"var"</span><span class="org-esk-paren">)</span>

</pre>



</li>
<li>
we now search the properties of enclosing headlines by adding <code>t</code>
as the last argument to



<pre class="src src-emacs-lisp"><span class="org-esk-paren">(</span>org-entry-get <span class="org-esk-paren">(</span>point<span class="org-esk-paren">)</span> header-arg t<span class="org-esk-paren">)</span>

</pre>




</li>
</ol>

</div>

<div id="outline-container-org-babel-params-from-properties-code" class="outline-3">
<h3 id="org-babel-params-from-properties-code"><a name="sec-1.1" id="sec-1.1"></a>code for `org-babel-params-from-properties' </h3>
<div class="outline-text-3" id="text-org-babel-params-from-properties-code">




<pre class="src src-emacs-lisp"><span class="org-esk-paren">(</span><span class="org-keyword">defun</span> <span class="org-function-name">org-babel-params-from-properties</span> <span class="org-esk-paren">()</span>
  <span class="org-doc">"Return an association list of any source block params which
may be specified in the properties of the current outline entry."</span>
  <span class="org-esk-paren">(</span><span class="org-keyword">save-match-data</span>
    <span class="org-esk-paren">(</span>delq nil
          <span class="org-esk-paren">(</span>mapcar
           <span class="org-esk-paren">(</span><span class="org-keyword">lambda</span> <span class="org-esk-paren">(</span>header-arg<span class="org-esk-paren">)</span>
             <span class="org-esk-paren">(</span><span class="org-keyword">let</span> <span class="org-esk-paren">((</span>val <span class="org-esk-paren">(</span>or <span class="org-esk-paren">(</span><span class="org-keyword">condition-case</span> nil
                                <span class="org-esk-paren">(</span>org-entry-get <span class="org-esk-paren">(</span>point<span class="org-esk-paren">)</span> header-arg t<span class="org-esk-paren">)</span>
                              <span class="org-esk-paren">(</span><span class="org-warning">error</span> nil<span class="org-esk-paren">))</span>
                            <span class="org-esk-paren">(</span>cdr <span class="org-esk-paren">(</span>assoc header-arg org-file-properties<span class="org-esk-paren">)))))</span>
               <span class="org-esk-paren">(</span><span class="org-keyword">when</span> val
                 <span class="org-comment-delimiter">;; </span><span class="org-comment">(message "prop %s=%s" header-arg val) ;; debugging
</span>                 <span class="org-esk-paren">(</span>cons <span class="org-esk-paren">(</span>intern <span class="org-esk-paren">(</span>concat <span class="org-string">":"</span> header-arg<span class="org-esk-paren">))</span> val<span class="org-esk-paren">))))</span>
           '<span class="org-esk-paren">(</span><span class="org-string">"cache"</span> <span class="org-string">"cmdline"</span> <span class="org-string">"exports"</span> <span class="org-string">"file"</span> <span class="org-string">"noweb"</span> <span class="org-string">"results"</span>
             <span class="org-string">"session"</span> <span class="org-string">"tangle"</span> <span class="org-string">"var"</span><span class="org-esk-paren">)))))</span>  
</pre>




</div>
</div>
</div>
