---
title: DONE header argument values are not being collected from properties
layout: default
---

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="done DONE"> DONE</span> header argument values are not being collected from properties </h2>
<div class="outline-text-2" id="text-1">

<ul>
<li>
State "DONE"       from "TODO" <span class="timestamp-wrapper"> <span class="timestamp">2009-12-28 Mon 18:11</span></span>
</li>
<li>
State "TODO"       from "" <span class="timestamp-wrapper"> <span class="timestamp">2009-12-28 Mon 16:07</span></span>
</li>
</ul>


<p>
Many types of header arguments are not having their values properly
read from outline-level properties.
</p>
<p>
There were two problems here
</p><ol>
<li>
we weren't searching for all needed header arguments in properties
</li>
<li>
we weren't inheriting header arguments from enclosing properties
</li>
</ol>


<p>
both of these issues were resolved in changes to
<code>org-babel-params-from-properties</code> (see <a href="#sec-1.1">below</a>).
</p>
<ol>
<li>
we are now tracking the following properties
</li>
</ol>




<pre class="src src-emacs-lisp">'(<span style="color: #87cefa;">"cache"</span> <span style="color: #87cefa;">"cmdline"</span> <span style="color: #87cefa;">"exports"</span> <span style="color: #87cefa;">"file"</span> <span style="color: #87cefa;">"noweb"</span> <span style="color: #87cefa;">"results"</span>
               <span style="color: #87cefa;">"session"</span> <span style="color: #87cefa;">"tangle"</span> <span style="color: #87cefa;">"var"</span>)
</pre>



<ol>
<li>
we now search the properties of enclosing headlines by adding <code>t</code>
as the last argument to
</li>
</ol>




<pre class="src src-emacs-lisp">(org-entry-get (point) header-arg t)
</pre>





</div>

<div id="outline-container-org-babel-params-from-properties-code" class="outline-3">
<h3 id="org-babel-params-from-properties-code"><a name="sec-1.1" id="sec-1.1"></a>code for `org-babel-params-from-properties' </h3>
<div class="outline-text-3" id="text-org-babel-params-from-properties-code">




<pre class="src src-emacs-lisp">(<span style="color: #afeeee; font-weight: bold;">defun</span> <span style="color: #7fffd4; font-weight: bold;">org-babel-params-from-properties</span> ()
  <span style="color: #87cefa;">"Return an association list of any source block params which
may be specified in the properties of the current outline entry."</span>
  (<span style="color: #afeeee; font-weight: bold;">save-match-data</span>
    (delq nil
          (mapcar
           (<span style="color: #afeeee; font-weight: bold;">lambda</span> (header-arg)
             (<span style="color: #afeeee; font-weight: bold;">let</span> ((val (or (<span style="color: #afeeee; font-weight: bold;">condition-case</span> nil
                                (org-entry-get (point) header-arg t)
                              (<span style="color: #ff0000; font-weight: bold;">error</span> nil))
                            (cdr (assoc header-arg org-file-properties)))))
               (<span style="color: #afeeee; font-weight: bold;">when</span> val
                 <span style="color: #add8e6;">;; </span><span style="color: #add8e6;">(message "prop %s=%s" header-arg val) ;; debugging
</span>                 (cons (intern (concat <span style="color: #87cefa;">":"</span> header-arg)) val))))
           '(<span style="color: #87cefa;">"cache"</span> <span style="color: #87cefa;">"cmdline"</span> <span style="color: #87cefa;">"exports"</span> <span style="color: #87cefa;">"file"</span> <span style="color: #87cefa;">"noweb"</span> <span style="color: #87cefa;">"results"</span>
             <span style="color: #87cefa;">"session"</span> <span style="color: #87cefa;">"tangle"</span> <span style="color: #87cefa;">"var"</span>)))))  
</pre>


</div>
</div>
</div>
