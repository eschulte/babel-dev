---
title: TODO Handling of table column names across languages 
layout: default
---

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="todo TODO"> TODO</span> Handling of table column names across languages </h2>
<div class="outline-text-2" id="text-1">

<ul>
<li>
State "TODO"       from "PROPOSED" <span class="timestamp-wrapper"> <span class="timestamp">2010-03-26 Fri 21:38</span></span>
</li>
<li>
State "PROPOSED"   from "" <span class="timestamp-wrapper"> <span class="timestamp">2010-02-23 Tue 20:04</span></span>
</li>
<li>
State "TODO"       from "" <span class="timestamp-wrapper"> <span class="timestamp">2010-02-23 Tue 12:22</span></span>
See also <a href="#*Support==rownames==and==other==org==babel==table==features">Support rownames and other org babel table features?</a>
</li>
</ul>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="right" /><col align="right" />
</colgroup>
<thead>
<tr><th scope="col">Date</th><th scope="col">Kg</th></tr>
</thead>
<tbody>
<tr><td>2010-02-21</td><td>95.0</td></tr>
<tr><td>2010-02-22</td><td>93.0</td></tr>
<tr><td>2010-02-23</td><td>92.0</td></tr>
<tr><td>2010-02-24</td><td>91.5</td></tr>
<tr><td>2010-02-25</td><td>91.0</td></tr>
<tr><td>2010-02-26</td><td>92.0</td></tr>
</tbody>
</table>


<p>
As things stand
</p>

</div>

<div id="outline-container-1.1" class="outline-3">
<h3 id="sec-1.1">python </h3>
<div class="outline-text-3" id="text-1.1">




<pre class="src src-python"><span style="color: #afeeee; font-weight: bold;">return</span> d
</pre>




<p>
Results in error because of 'hline
</p>
<p>
We could remove the hline with the following, but need to think about whether to include the column names or not.
</p>



<pre class="src src-emacs-lisp">(<span style="color: #afeeee; font-weight: bold;">defun</span> <span style="color: #7fffd4; font-weight: bold;">org-babel-python-var-to-python</span> (var)
  <span style="color: #87cefa;">"Convert an elisp var into a string of python source code
specifying a var of the same value."</span>
  (<span style="color: #afeeee; font-weight: bold;">if</span> (listp var)
      (concat <span style="color: #87cefa;">"["</span> (mapconcat #'org-babel-python-var-to-python (remq 'hline var) <span style="color: #87cefa;">", "</span>) <span style="color: #87cefa;">"]"</span>)
      <span style="color: #add8e6;">;; </span><span style="color: #add8e6;">(concat "[" (mapconcat #'org-babel-python-var-to-python var ", ") "]")
</span>    (format <span style="color: #87cefa;">"%S"</span> var)))
</pre>




<p>
That change would give this as result:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="right" /><col align="right" />
</colgroup>
<tbody>
<tr><td>Date</td><td>Kg</td></tr>
<tr><td>2010-02-21</td><td>95.0</td></tr>
<tr><td>2010-02-22</td><td>93.0</td></tr>
<tr><td>2010-02-23</td><td>92.0</td></tr>
<tr><td>2010-02-24</td><td>91.5</td></tr>
<tr><td>2010-02-25</td><td>91.0</td></tr>
<tr><td>2010-02-26</td><td>92.0</td></tr>
</tbody>
</table>

</div>

</div>

<div id="outline-container-1.2" class="outline-3">
<h3 id="sec-1.2">R </h3>
<div class="outline-text-3" id="text-1.2">




<pre class="src src-R">d
</pre>




<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="right" /><col align="right" />
</colgroup>
<tbody>
<tr><td>2010-02-21</td><td>95</td></tr>
<tr><td>2010-02-22</td><td>93</td></tr>
<tr><td>2010-02-23</td><td>92</td></tr>
<tr><td>2010-02-24</td><td>91.5</td></tr>
<tr><td>2010-02-25</td><td>91</td></tr>
<tr><td>2010-02-26</td><td>92</td></tr>
</tbody>
</table>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="left" /><col align="left" />
</colgroup>
<thead>
<tr><th scope="col">Date</th><th scope="col">Kg</th></tr>
</thead>
<tbody>
<tr><td>2010-02-21</td><td>95.0</td></tr>
</tbody>
</table>


<p>
NB Is it unfortunate that a named simple vector doesn't get its names
printed out with :colnames yes?
</p>



<pre class="src src-R"><span style="color: #7fffd4; font-weight: bold;">c</span>(a=1,b=2)
</pre>




<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="right" />
</colgroup>
<thead>
<tr><th scope="col">x</th></tr>
</thead>
<tbody>
<tr><td>1</td></tr>
<tr><td>2</td></tr>
</tbody>
</table>


<p>
This is because a 1d vector gets turned into a table with one column,
and hence its names would be rownames, not column names. One has to
transpose the vector in R to get the desired result.
</p>



<pre class="src src-R"><span style="color: #7fffd4; font-weight: bold;">t</span>(<span style="color: #7fffd4; font-weight: bold;">c</span>(a=1,b=2))
</pre>




<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="left" /><col align="left" />
</colgroup>
<thead>
<tr><th scope="col">a</th><th scope="col">b</th></tr>
</thead>
<tbody>
<tr><td>1</td><td>2</td></tr>
</tbody>
</table>


</div>

</div>

<div id="outline-container-1.3" class="outline-3">
<h3 id="sec-1.3">shell </h3>
<div class="outline-text-3" id="text-1.3">




<pre class="src src-sh"><span style="color: #7fffd4;">echo</span> $<span style="color: #40e0d0; font-weight: bold;">d</span>
</pre>




<p>
Error:
</p>
<p>
org-babel-sh-var-to-sh wrongly converts 'hline into "hline" resulting
in error in orgtbl-to-generic. Could change last loine of org-babel-sh-var-to-sh
</p>
<p>
(if (stringp var) (format "%s" var) (format "%S" var))))
</p>
<p>
to
</p>
<p>
(cond
((eq var 'hline) var)
((stringp var) (format "%s" var))
(t (format "%S" var)))
</p>
<p>
But need to think about whether the hline should even be there at this
stage, or whether hlines and column names should have been removed (at
least hlines as 2nd element of elisp table).
</p></div>
</div>
</div>
