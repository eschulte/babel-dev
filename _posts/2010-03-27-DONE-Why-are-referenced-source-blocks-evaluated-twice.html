---
title: DONE Why are referenced source blocks evaluated twice?
layout: default
---

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="done DONE"> DONE</span> Why are referenced source blocks evaluated twice? </h2>
<div class="outline-text-2" id="text-1">

<ul>
<li>
State "DONE"       from "PROPOSED" <span class="timestamp-wrapper"> <span class="timestamp">2010-03-27 Sat 17:00</span></span>
</li>
<li>
State "PROPOSED"   from "" <span class="timestamp-wrapper"> <span class="timestamp">2010-03-20 Sat 12:48</span></span>

<p>
Fixed at 47571965d4b4977d72781f8a80ac29c6a609e731
</p>
</li>
</ul>

</div>

<div id="outline-container-1_1" class="outline-3">
<h3 id="sec-1_1">Example </h3>
<div class="outline-text-3" id="text-1_1">




<div class="org-src-container"><label class="org-src-name">python-block()</label><pre class="src src-python">
<span class="org-keyword">return</span> <span class="org-string">'from python'</span>
</pre></div>





<pre class="src src-emacs-lisp">x
</pre>




<p>
With this debugging patch
</p>


<pre class="example">diff --git a/contrib/babel/lisp/org-babel.el b/contrib/babel/lisp/org-babel.el
index d01e6d6..40331a0 100644
--- a/contrib/babel/lisp/org-babel.el
+++ b/contrib/babel/lisp/org-babel.el
@@ -198,6 +198,7 @@ block."
   (interactive)
   ;; (message "supplied params=%S" params) ;; debugging
   (let* ((info (or info (org-babel-get-src-block-info)))
+        (remove-me (message (concat "\n" (pp info) "\n")))
          (lang (first info))
         (params (setf (third info)
                        (sort (org-babel-merge-params (third info) params)
</pre>



<p>
We get this output
</p>


<pre class="example">("emacs-lisp" "x\n"
 ((:comments . "")
  (:shebang . "")
  (:cache . "no")
  (:noweb . "no")
  (:tangle . "")
  (:exports . "code")
  (:results . "replace")
  (:var . "x=python-block")
  (:session . "none"))
 "")


("emacs-lisp" "x\n"
 ((:comments . "")
  (:shebang . "")
  (:cache . "no")
  (:noweb . "no")
  (:tangle . "")
  (:exports . "code")
  (:results . "replace")
  (:var . "x=python-block")
  (:session . "none"))
 "")
 [2 times]
executing emacs-lisp code block...
("python" "return 'from python'\n"
 ((:comments . "")
  (:shebang . "")
  (:cache . "no")
  (:noweb . "no")
  (:tangle . "")
  (:exports . "code")
  (:results . "replace")
  (:session . "none"))
 "" "python-block")


("python" "return 'from python'\n"
 ((:comments . "")
  (:shebang . "")
  (:cache . "no")
  (:noweb . "no")
  (:tangle . "")
  (:exports . "code")
  (:results . "replace")
  (:session . "none"))
 "" "python-block")
 [2 times]
executing Python source code block
"from python"
("python" "return 'from python'\n"
 ((:comments . "")
  (:shebang . "")
  (:cache . "no")
  (:noweb . "no")
  (:tangle . "")
  (:exports . "code")
  (:results . "replace")
  (:session . "none"))
 "" "python-block")


("python" "return 'from python'\n"
 ((:comments . "")
  (:shebang . "")
  (:cache . "no")
  (:noweb . "no")
  (:tangle . "")
  (:exports . "code")
  (:results . "replace")
  (:session . "none"))
 "" "python-block")
 [2 times]
executing Python source code block
"from python"
finished
</pre>


</div>
</div>
</div>
