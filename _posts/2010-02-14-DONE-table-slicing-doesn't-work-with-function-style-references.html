---
title: DONE table slicing doesn't work with function style references
layout: default
---

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="done DONE"> DONE</span> table slicing doesn't work with function style references </h2>
<div class="outline-text-2" id="text-1">

<ul>
<li>
State "DONE"       from "TODO" <span class="timestamp-wrapper"> <span class="timestamp">2010-02-14 Sun 11:49</span></span>
</li>
<li>
State "TODO"       from "" <span class="timestamp-wrapper"> <span class="timestamp">2010-02-12 Fri 13:45</span></span>

</li>
</ul>




<div class="org-src-container"><label class="org-src-name">f()</label><pre class="src src-sh">
<span class="org-builtin">echo</span> $<span class="org-variable-name">rs</span>
</pre></div>



<p>
reference 'karafet-hgR[1' not found in this buffer
</p>
<p>
this is now fixed in the following commit, in which ensure that
`org-babel-ref-split-args' will maintain balanced square brackets.
</p>


<pre class="src src-magit">commit 692c569215453f4283d3ecfa24d3d6e1f2715c02
Author: Eric Schulte
Date:   Sun Feb 14 11:48:28 2010 -0700

    babel: smarter `org-babel-ref-split-args' -- fixes bug parsing indexed function-style args

        Modified contrib/babel/lisp/org-babel-ref.el
diff --git a/contrib/babel/lisp/org-babel-ref.el b/contrib/babel/lisp/org-babel-ref.el
index dc51020..c0e6a55 100644
--- a/contrib/babel/lisp/org-babel-ref.el
+++ b/contrib/babel/lisp/org-babel-ref.el
@@ -193,8 +193,8 @@ which case the entire range is returned.<span class="org-string">"
         (when (= depth 0)
           (setq return (reverse (cons (substring buffer 0 -1) return)))
           (setq buffer "")))
-       ((string= holder "</span>(<span class="org-string">") (setq depth (+ depth 1)))
-       ((string= holder "</span>)<span class="org-string">") (setq depth (- depth 1)))))
+       ((or (string= holder "</span>(<span class="org-string">") (string= holder "</span>[<span class="org-string">")) (setq depth (+ depth 1)))
+       ((or (string= holder "</span>)<span class="org-string">") (string= holder "</span>]<span class="org-string">")) (setq depth (- depth 1)))))
     (mapcar #'org-babel-trim (reverse (cons buffer return)))))

 (defun org-babel-ref-at-ref-p ()
</span></pre>


</div>
</div>
