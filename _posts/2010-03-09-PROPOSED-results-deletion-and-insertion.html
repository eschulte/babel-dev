---
title: PROPOSED results deletion and insertion
layout: default
---

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="todo PROPOSED"> PROPOSED</span> results deletion and insertion </h2>
<div class="outline-text-2" id="text-1">

<ul>
<li>
State "PROPOSED"   from "" <span class="timestamp-wrapper"> <span class="timestamp">2010-03-09 Tue 09:33</span></span>
</li>
</ul>


<p>
Graham's problem was that on C-c C-c, this
</p>

<p>
,#+ATTR<sub>LaTeX</sub>: width=10cm
,#+results: BoxplotFlowering
<a href="FloweringBoxplot.pdf">file:FloweringBoxplot.pdf</a>
</p>
<p>
turns into this:
</p>
<p>
,#+results: BoxplotFlowering
<a href="FloweringBoxplot.pdf">file:FloweringBoxplot.pdf</a>
,#+ATTR<sub>LaTeX</sub>: width=10cm
</p>

<p>
Two questions:
</p><ol>
<li>
Is it desirable that we remove the corresponding results block
<b>anywhere</b> in the buffer, but then re-insert it beneath the code
block? Or should we promise to re-insert in situ, in the case
that we find a pre-existing results block?
</li>
<li>
How should a user use a #+ATTR<sub>LaTeX</sub> line?
</li>
</ol>



</div>

<div id="outline-container-1.1" class="outline-3">
<h3 id="sec-1.1">Graham Smith email </h3>
<div class="outline-text-3" id="text-1.1">




<pre class="src src-message"><span style="color: #add8e6;">From:</span> <span style="color: #66cdaa;">Dan Davison &lt;<a href="mailto:davison&#64;stats.ox.ac.uk">davison&#64;stats.ox.ac.uk</a>&gt;</span>
<span style="color: #add8e6;">Subject:</span> <span style="color: #e0ffff; font-weight: bold;">Re: [Orgmode] Re: [babel] captions and figure size on export</span>
<span style="color: #add8e6;">User-Agent:</span> <span style="color: #66cdaa;">Gnus/5.13 (Gnus v5.13) Emacs/23.1 (gnu/linux)</span>
<span style="color: #add8e6;">Date:</span> <span style="color: #66cdaa;">Tue, 09 Mar 2010 09:32:19 -0500</span>
<span style="color: #add8e6;">To:</span> <span style="color: #e0ffff; font-weight: bold;">Graham Smith &lt;<a href="mailto:myotisone&#64;gmail.com">myotisone&#64;gmail.com</a>&gt;</span>
<span style="color: #add8e6;">Cc:</span> <span style="color: #e0ffff;">emacs-orgmode@gnu.org</span>

Graham Smith &lt;<a href="mailto:myotisone&#64;gmail.com">myotisone&#64;gmail.com</a>&gt; writes:

<span style="color: #ffa07a;">&gt; This is driving me mad here:  I have removed all the fig and size code</span>
<span style="color: #ffa07a;">&gt; and replaced it with onky one line that should be resizing the first</span>
<span style="color: #ffa07a;">&gt; graph(FloweringBoxplot.pdf).  However, its resizing the second graph</span>
<span style="color: #ffa07a;">&gt; (NonFloweringBoxplot/pdf) and not affecting the first graph. This</span>
<span style="color: #ffa07a;">&gt; works on other files, so I am really at a loss here.</span>

Hi Graham,

We can see what's going on here by executing the block manually with C-c
C-c, which transforms your results block from this:

#+ATTR_LaTeX: width=10cm
#+results: BoxplotFlowering
[[file:FloweringBoxplot.pdf]]

into this:

#+results: BoxplotFlowering
[[file:FloweringBoxplot.pdf]]
#+ATTR_LaTeX: width=10cm

(The reason is that the results block corresponding to the code block is
first deleted and then re-inserted immediately below the code block).

You are using ':exports both' which means that the above transformation
actually occurs during export, but in a special pre-export org buffer
which the user never sees. The fact that the ATTR_LaTeX line ends up
last explains why it modifies the *second* block.

Thanks for pointing this out -- we will revisit this behaviour as it
does seem surprising and on the face of it undesirable.

As a workaround, is it necessary for you to execute the block on export?
Or could you instead use :exports code? I.e. before export, execute the
block manually and ensure that the #+ATTR_LaTeX and #+results lines are
arranged in the correct way.

Dan
</pre>





<p>
&gt;
&gt;
&gt; #+srcname:BoxplotFlowering
&gt; #+begin<sub>src</sub> R :session daf :file FloweringBoxplot.pdf :exports both
&gt; boxplot(daf$Flower~daf
&gt; $YEAR)
&gt; #+end<sub>src</sub>
&gt;
&gt; #+ATTR<sub>LaTeX</sub>: width=10cm
&gt; #+results: BoxplotFlowering
&gt; <a href="FloweringBoxplot.pdf">file:FloweringBoxplot.pdf</a>
&gt;
&gt;
&gt; #+srcname:BoxplotNonFlowering
&gt; #+begin<sub>src</sub> R :session daf :file NonFloweringBoxplot.pdf :exports both
&gt; boxplot(daf$No.Flower~daf$YEAR)
&gt; #+end<sub>src</sub>
&gt;
&gt; #+results: BoxplotNonFlowering
&gt; <a href="NonFloweringBoxplot.pdf">file:NonFloweringBoxplot.pdf</a>
&gt;
&gt; Graham
&gt;
&gt;
&gt; _______________________________________________
&gt; Emacs-orgmode mailing list
&gt; Please use `Reply All' to send replies to the list.
&gt; Emacs-orgmode@gnu.org
&gt; <a href="http://lists.gnu.org/mailman/listinfo/emacs-orgmode">http://lists.gnu.org/mailman/listinfo/emacs-orgmode</a>
</p></div>
</div>
</div>
