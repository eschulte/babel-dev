---
title: DONE code block body expansion for table and preview
layout: default
---

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="done DONE"> DONE</span> code block body expansion for table and preview </h2>
<div class="outline-text-2" id="text-1">

<ul>
<li>
State "DONE"       from "" <span class="timestamp-wrapper"> <span class="timestamp">2010-04-23 Fri 09:44</span></span>

<p>
In org-babel, code is "expanded" prior to evaluation. I.e. the
code that is actually evaluated comprises the code block
contents, augmented with the extra code which assigns the
referenced data to variables. It is now possible to preview
expanded contents, and also to expand code during during
tangling.  This expansion takes into account all header
arguments, and variables.
</p>
</li>
<li>
A new key-binding <code>C-c M-b p</code> bound to
`org-babel-expand-src-block' can be used from inside of a source
code block to preview its expanded contents (which can be very
useful for debugging).

</li>
<li>
The expanded body can now be tangled, this includes
variable values which may be the results of other source-code
blocks, or stored in headline properties or tables.  One possible
use for this is to allow those using org-babel for their emacs
initialization to store values (e.g. usernames, passwords,
etc&hellip;) in headline properties or in tables.  The <code>:no-expand</code>
header argument can be used to inhibit expansion of a code block
body during tangling.

</li>
</ul>

<p>Here is an example of a code block and its resulting expanded body.
</p>
<p>
The data in the file.
</p><table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="left" /><col align="left" />
</colgroup>
<tbody>
<tr><td>username</td><td>john-doe</td></tr>
<tr><td>password</td><td>abc123</td></tr>
</tbody>
</table>


<p>
The actual code block
</p>


<div class="org-src-container"><label class="org-src-name">setup-my-account(data=user-data)</label><pre class="src src-emacs-lisp">
<span class="org-esk-paren">(</span>setq my-special-username <span class="org-esk-paren">(</span>first <span class="org-esk-paren">(</span>first data<span class="org-esk-paren">)))</span>
<span class="org-esk-paren">(</span>setq my-special-password <span class="org-esk-paren">(</span>first <span class="org-esk-paren">(</span>second data<span class="org-esk-paren">)))</span>
</pre></div>



<p>
its expanded contents, as seen with <code>C-c M-b p</code>
</p>


<pre class="src src-emacs-lisp"><span class="org-esk-paren">(</span><span class="org-keyword">let</span> <span class="org-esk-paren">((</span>data <span class="org-esk-paren">(</span>quote <span class="org-esk-paren">((</span><span class="org-string">"john-doe"</span><span class="org-esk-paren">)</span> <span class="org-esk-paren">(</span><span class="org-string">"abc123"</span><span class="org-esk-paren">)))))</span>
<span class="org-esk-paren">(</span>setq my-special-username <span class="org-esk-paren">(</span>first <span class="org-esk-paren">(</span>first data<span class="org-esk-paren">)))</span>
<span class="org-esk-paren">(</span>setq my-special-password <span class="org-esk-paren">(</span>first <span class="org-esk-paren">(</span>second data<span class="org-esk-paren">)))</span>
<span class="org-esk-paren">)</span>
</pre>


</div>
</div>
