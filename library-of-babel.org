#+title:    The Library of Babel
#+SEQ_TODO: TODO PROPOSED | DONE DEFERRED REJECTED
#+OPTIONS:  H:3 num:nil toc:2 \n:nil @:t ::t |:t ^:t -:t f:t *:t TeX:t LaTeX:t skip:nil d:(HIDE) tags:not-in-toc
#+STARTUP:  odd hideblocks
#+STYLE:    <style type="text/css">#outline-container-1 { clear:both; }</style>

#+begin_html
  <div id="logo" style="float: left; text-align: center; max-width: 340px; font-size: 8pt; margin-left: 1em;">
    <p>
      <img src="../../images/babel/library-of-babel.png" alt="Library of Babel"/>
      <div id="attr">
        The Library of Babel, by Pierre Clayette
        <p>
        <a href="http://downlode.org/Etext/library_of_babel.html">Full text of the Borges short story</a>
        </p>
      </div>
    </p>  
  </div>
#+end_html

* Introduction
  The Library of Babel is an extensible collection of ready-made and
  easily-shortcut-callable source-code blocks for handling common
  tasks.  Org-babel comes pre-populated with the source-code blocks
  located in this file. It is possible to add source-code blocks from
  any org-mode file to the library by calling =(org-babel-lob-ingest
  "path/to/file.org")=.
  
  This file is included in worg mainly less for viewing through the
  web interface, and more for contribution through the worg git
  repository.  If you have code snippets that you think others may
  find useful please add them to this file and [[file:~/src/worg/worg-git.org::contribute-to-worg][contribute them]] to
  worg.
  
  The raw Org-mode text of this file can be downloaded at
#+html: <a href="http://eschulte.github.com/org-babel/library-of-babel.org">library-of-babel.org</a>

* Plotting code

** R
  Plot column 2 (y axis) against column 1 (x axis). Columns 3 and beyond, if present, are ignored.

#+srcname: R-plot(data=R-plot-example-data)
#+begin_src R :session *R*
plot(data)
#+end_src

#+tblname: R-plot-example-data
| 1 |  2 |
| 2 |  4 |
| 3 |  9 |
| 4 | 16 |
| 5 | 25 |

#+lob: R-plot(data=R-plot-example-data)

#+resname: R-plot(data=R-plot-example-data)
: nil

** Gnuplot

* Table/Matrix manipulation
*** Transposing a matrix
***** Emacs lisp
#+srcname: transpose-elisp(table)
#+begin_src emacs-lisp
  (apply #'mapcar* #'list table)
#+end_src

***** Example usage

#+tblname: transpose-example
| 1 | 2 | 3 |
| 4 | 5 | 6 |

#+lob: transpose-elisp(table=transpose-example)

#+resname: transpose-elisp(table=transpose-example)
| 1 | 4 |
| 2 | 5 |
| 3 | 6 |

*** Binding tables together by columns
***** Emacs lisp
#+srcname: column-bind-elisp(a=tab1, b=tab2)
#+begin_src emacs-lisp 
(mapcar* 'append a b)
#+end_src

***** R
#+srcname: column-bind-R(a=tab3, b=tab4)
#+begin_src R :colnames t
cbind(a, b)
#+end_src

***** Example usage

Suppose the tables are

#+tblname: tab1
| 1 | 2 | 3 |
| 7 | 8 | 9 |

#+tblname: tab2
|  4 |  5 |  6 |
| 10 | 11 | 12 |

#+lob: column-bind-elisp(tab1, tab2)

#+resname: column-bind-elisp(tab1, tab2)
| 1 | 2 | 3 |  4 |  5 |  6 |
| 7 | 8 | 9 | 10 | 11 | 12 |

 The R code block can also cope with column names:

#+tblname: tab3
| a | b | c |
|---+---+---|
| 1 | 2 | 3 |
| 7 | 8 | 9 |

#+tblname: tab4
|  d |  e |  f |
|----+----+----|
|  4 |  5 |  6 |
| 10 | 11 | 12 |

#+lob: column-bind-R(tab3, tab4)

#+resname: column-bind-R(tab3, tab4)
| "a" | "b" | "c" | "d" | "e" | "f" |
|-----+-----+-----+-----+-----+-----|
|   1 |   2 |   3 |   4 |   5 |   6 |
|   7 |   8 |   9 |  10 |  11 |  12 |

